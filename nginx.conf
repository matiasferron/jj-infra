events {
  worker_connections  4096;  ## Default: 1024
}

http {
    server {
      listen 80;

      location /api/posts {
          proxy_set_header Host $host;
          proxy_pass http://jj-posts:8080/api/posts;
      }

      location /api/likes {
          proxy_set_header Host $host;
          proxy_pass http://jj-posts:8080/api/likes;
      }

      location /api/users {
          proxy_set_header   Host $host;
          proxy_pass http://jj-user:8080/api/users;
      }

      location /api/login {
         proxy_set_header   Host $host;
         proxy_pass http://jj-user:8080/api/login;
      }


      location /api/followers {
         proxy_set_header   Host $host;
          proxy_pass http://jj-user:8080/api/followers;
      }

      location /ws {
             proxy_pass                  http://jibjabmessage:8080/ws;
             proxy_http_version          1.1;
             proxy_set_header            Upgrade $http_upgrade;
             proxy_set_header            Connection "upgrade";
             proxy_set_header            Host $host;
      }

      location / {
            proxy_set_header   Host $host;
            proxy_pass http://jibber-jabber-client:80/;
      }
    }

}